BootStrap: localimage
From: base.sif

%files
    ./lookahead.py /lookahead.py
    ./chi2.py /chi2.py
    ./samplers /samplers
    ../utils/dDNNF_parser/src/dDNNF.py /dDNNF.py
    ../utils/dDNNF_parser/src/dDNNF.py /samplers/dDNNF.py
    ../utils/dDNNF_parser/src/DIMACS.py /DIMACS.py
    # ../deps/quicksampler /quicksampler
    ../../appNNF/ddnnf/src /jsampler

    ../../appNNF/cppddnnf/src /ksampler/src
    ../../appNNF/cppddnnf/CMakeLists.txt /ksampler/CMakeLists.txt

%post
    cd /ksampler
    cmake .
    make -j8 ksampler
    make -j8 rsampler

%runscript
    /usr/bin/python3 /chi2.py "$@"

