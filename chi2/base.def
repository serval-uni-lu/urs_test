BootStrap: docker
From: ubuntu:22.04

%files
    /home/oz/Documents/projects/cpp/d4/d4 /d4
    ./STS/core/STS /STS

%post
    echo "setup start"
    apt-get -y update

    apt-get -y install tzdata
    apt-get -y install build-essential cmake git libgmp-dev libgmpxx4ldbl libboost-dev
    apt-get -y install zlib1g-dev libboost-program-options-dev libm4ri-dev z3
    apt-get -y install python3 python3-pandas python3-numpy python3-setuptools python3-pycosat
    apt-get -y install python3-pip z3 python3-pydot
    pip3 install anytree

# UNIGEN3
    git clone https://github.com/msoos/cryptominisat
    cd cryptominisat
    git checkout 997d634b6ccf0fb7fa086fa64a067433e9d0a071
    mkdir build && cd build
    cmake -DUSE_GAUSS=ON -DLARGEMEM=ON ..
    make -j4
    make install
    cd ../..
    git clone https://github.com/meelgroup/approxmc/
    cd approxmc
    git checkout 4e6c67784218c7533c57b3e8571db6186a813915
    mkdir build && cd build
    cmake -DLARGEMEM=ON ..
    make -j4
    make install
    cd ../..
    git clone https://github.com/meelgroup/unigen/
    cd unigen
    git checkout 69a0acc297b2f617856315487dc290f0aa1142c5
    mkdir build && cd build
    cmake -DLARGEMEM=ON ..
    make -j4
    make install



# %runscript
    # /wrap 64000 18000 /unigen/build/unigen "$@"
